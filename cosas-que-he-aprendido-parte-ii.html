<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Israel Fermín Montilla" />
        <meta name="copyright" content="Israel Fermín Montilla" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="desarrollo, mixins, programación, Blog, " />

<meta property="og:title" content="Cosas que he aprendido (Parte II):  - Mixins "/>
<meta property="og:url" content="http://iferminmontilla.com/cosas-que-he-aprendido-parte-ii.html" />
<meta property="og:description" content="A menudo nos ocurre que estamos programando y vemos que hay ciertos métodos que se repiten en varias clases, esto es una señal de que ese conjunto de métodos pueden abstraerse de alguna manera para no tener que duplicar esa lógica, entonces, escribimos una clase base, con esos métodos y ..." />
<meta property="og:site_name" content="@#$%_" />
<meta property="og:article:author" content="Israel Fermín Montilla" />
<meta property="og:article:published_time" content="2015-07-19T12:30:00-04:30" />
<meta name="twitter:title" content="Cosas que he aprendido (Parte II):  - Mixins ">
<meta name="twitter:description" content="A menudo nos ocurre que estamos programando y vemos que hay ciertos métodos que se repiten en varias clases, esto es una señal de que ese conjunto de métodos pueden abstraerse de alguna manera para no tener que duplicar esa lógica, entonces, escribimos una clase base, con esos métodos y ...">

        <title>Cosas que he aprendido (Parte II):  - Mixins  · @#$%_
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="http://iferminmontilla.com/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://iferminmontilla.com/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://iferminmontilla.com/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://iferminmontilla.com/theme/css/custom.css" media="screen">
        <link href="http://iferminmontilla.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="@#$%_ - Full Atom Feed" />
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-55459920-1', 'auto');
    ga('send', 'pageview');
</script>
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="http://iferminmontilla.com/"><span class=site-name>@#$%_</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="http://iferminmontilla.com">Home</a></li>
                            <li ><a href="http://iferminmontilla.com/categories.html">Categories</a></li>
                            <li ><a href="http://iferminmontilla.com/tags.html">Tags</a></li>
                            <li ><a href="http://iferminmontilla.com/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="http://iferminmontilla.com/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="http://iferminmontilla.com/cosas-que-he-aprendido-parte-ii.html"> Cosas que he aprendido (Parte II):  <small> Mixins </small>  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <p>A menudo nos ocurre que estamos programando
y vemos que hay ciertos métodos que se repiten
en varias clases, esto es una señal de que ese
conjunto de métodos pueden abstraerse de alguna manera
para no tener que duplicar esa lógica, entonces,
escribimos una clase base, con esos métodos y
luego simplemente la heredamos y todo cool.</p>
<p>Cuando esto ocurre por segunda vez en un subconjunto
de las clases <em>hijas</em>, pueden pasar dos cosas:</p>
<ol class="arabic simple">
<li>Ese conjunto de métodos pertenece al mismo
dominio del problema, en cuyo caso, los
colocamos en la clase padre que corresponda</li>
<li>Ese conjunto de métodos resuelve otro tipo de
problemas o es más bien algún tipo de utilidad
pero debe estar en esa clase por alguna razón.</li>
</ol>
<p>En el segundo caso lo que uno tiende a hacer con
lenguajes que soportan herencia múltiple como Python
es crear una nueva clase y agregarla a la lista de clases
padre de la clase en cuestión.</p>
<p>Conforme nuestro programa va creciendo en complejidad,
podemos enfrentarnos al famoso problema del diamante de
la herencia múltiple, los mixins son una solución limpia
y sencilla para evitar este tipo de inconvenientes que son
un dolor de cabeza para depurar y agregan complicaciones
innecesarias.</p>
<div class="section" id="que-es-un-mixin">
<h2>¿Qué es un Mixin?</h2>
<p>Un Mixin es una clase que hereda de la clase por defecto, <em>object</em>
en el caso de Python, y define un conjunto de métodos para agregar
comportamiento a alguna otra entidad. Un mixin por sí solo puede
resultar inútil, pero al combinarlos y agregarlos a una clase
resultan ser una herramienta muy potente que ayuda a la reutilización
de código sin ambigüedades y sin generar efectos colaterales.</p>
</div>
<div class="section" id="ejemplos">
<h2>Ejemplos</h2>
<p>Bueno, basta de palabrería y manos al teclado.</p>
<p>Supongamos que estamos desarrollando algo en <em>django</em> y necesitamos
que el usuario sea capaz de dejar comentarios, esta vista debe ser
invocable vía ajax. Debo hacerlo de manera que pueda reusar el código
pues se que en el futuro habrá más vistas que deben ser &quot;ajax friendly&quot;</p>
<pre class="code python literal-block">
<span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">CreateView</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>

<span class="kn">from</span> <span class="nn">app.models</span> <span class="kn">import</span> <span class="n">Comment</span>
<span class="kn">from</span> <span class="nn">app.forms</span> <span class="kn">import</span> <span class="n">CommentForm</span>


<span class="k">class</span> <span class="nc">CommentCreateView</span><span class="p">(</span><span class="n">CreateView</span><span class="p">,</span> <span class="n">JSONResponseMixin</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Comment</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">CommentForm</span>
</pre>
<p>Como vemos, es la implementación de lo que vendría siendo una vista basada
en clases normal y corriente para procesar un formulario, validarlo y crear
un nuevo registro de <em>Comment</em>, sólo una cosa salta a la vista: el <em>JSONResponseMixin</em>.
Veamos qué hace:</p>
<pre class="code python literal-block">
<span class="k">class</span> <span class="nc">JSONResponseMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_json_response</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_json_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
            <span class="n">content_type</span><span class="o">=</span><span class="s">'application/json'</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
</pre>
<p>Y eso es todo, luego, si necesito hacer que alguna otra vista sea &quot;ajax friendly&quot;,
simplemente tengo que hacer que herede del <em>JSONResponseMixin</em>. Algo importante acá
es que si necesito serializar objetos complejos, <em>json.dumps()</em> no será suficiente,
debería escribir mi propio método para convertirlo en <em>JSON</em> y enviarlo.</p>
<p>Si te parece útil o interesante lo que escribo, suscríbete a mi lista de correos en
la caja que está a la derecha, tengo algunas cosas en mente que estaré anunciando por
esa vía. Gracias, de nuevo, por leerme.</p>
</div>

            <section>
    <p id="post-share-links">
    Compártelo
    <a href="http://twitter.com/home?status=Cosas%20que%20he%20aprendido%20%28Parte%20II%29%3A%20Mixins%20http%3A//iferminmontilla.com/cosas-que-he-aprendido-parte-ii.html" target="_blank" title="Share on Twitter">Twitter</a>
    ❄
    <a href="http://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=http%3A//iferminmontilla.com/cosas-que-he-aprendido-parte-ii.html" target="_blank" title="Share on Facebook">Facebook</a>
    ❄
    <a href="https://plus.google.com/share?url=http%3A//iferminmontilla.com/cosas-que-he-aprendido-parte-ii.html" target="_blank" title="Share on Google Plus">Google+</a>
    ❄
    <a href="mailto:?subject=Cosas%20que%20he%20aprendido%20%28Parte%20II%29%3A%20Mixins&amp;body=http%3A//iferminmontilla.com/cosas-que-he-aprendido-parte-ii.html" target="_blank" title="Share via Email">Email</a>
    </p>
</section>

            <section>
<p id="comment-message">Preguntas, comentatios, chistes o sugerencias, por acá. </p>
<div class="accordion" id="accordion2">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle disqus-comment-count" data-toggle="collapse" data-parent="#accordion2"
                href="http://iferminmontilla.com/cosas-que-he-aprendido-parte-ii.html#disqus_thread">
                Comments
            </a>
        </div>
        <div id="disqus_thread" class="accordion-body collapse">
            <div class="accordion-inner">
                <div class="comments">
                    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'iferminmblog';
        var disqus_identifier = 'http://iferminmontilla.com/cosas-que-he-aprendido-parte-ii.html';
    var disqus_url = 'http://iferminmontilla.com/cosas-que-he-aprendido-parte-ii.html';

    (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

                </div>
            </div>
        </div>
    </div>
</div>
</section>

            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2015-07-19T12:30:00-04:30">Jul 19, 2015</time>
            <h4>Category</h4>
            <a class="category-link" href="http://iferminmontilla.com/categories.html#blog-ref">Blog</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="http://iferminmontilla.com/tags.html#desarrollo-ref">desarrollo
                    <span>4</span>
</a></li>
                <li><a href="http://iferminmontilla.com/tags.html#mixins-ref">mixins
                    <span>1</span>
</a></li>
                <li><a href="http://iferminmontilla.com/tags.html#programacion-ref">programación
                    <span>10</span>
</a></li>
            </ul>
<h4>Sígueme!</h4>
    <a href="http://twitter.com/iferminm" title="My Twitter Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-twitter sidebar-social-links"></i></a>
    <a href="http://www.linkedin.com/profile/view?id=66587805&amp;trk=tab_pro" title="My LinkedIn Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-linkedin sidebar-social-links"></i></a>
    <a href="https://github.com/iferminm" title="My GitHub Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-github sidebar-social-links"></i></a>
    <a href="mailto:iferminmontilla@gmail.com" title="My Email Address" class="sidebar-social-links" target="_blank">
    <i class="fa fa-envelope sidebar-social-links"></i></a>
<!-- Begin MailChimp Signup Form -->
<div id="mc-embed-signup">
<form action="http://iferminmontilla.us11.list-manage.com/subscribe/post?u=0d4b15ef6a90baa460d821dbc&id=8b51ac80b2" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
<h4>Suscríbete</h4>
<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Pasa tu correo pues..." required>
<div class="clear"><input type="submit" value="Ok, pero sin spam" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
</form>
</div>
<!--End mc_embed_signup-->
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

            <script type="text/javascript">
var disqus_shortname = 'iferminmblog';
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
<script  language="javascript" type="text/javascript">
function uncollapse() {
    if (window.location.hash.match(/^#comment-\d+$/)) {
        $('#disqus_thread').collapse('show');
    }
}
</script>
<script type="text/javascript" language="JavaScript">
uncollapse();
window.onhashchange=function(){
    if (window.location.hash.match(/^#comment-\d+$/))
        window.location.reload(true);
}
</script>
<script>
$('#disqus_thread').on('shown', function () {
    var link = document.getElementsByClassName('accordion-toggle');
    var old_innerHTML = link[0].innerHTML;
    $(link[0]).fadeOut(500, function() {
        $(this).text('Click here to hide comments').fadeIn(500);
    });
    $('#disqus_thread').on('hidden', function () {
        $(link[0]).fadeOut(500, function() {
            $(this).text(old_innerHTML).fadeIn(500);
        });
    })
})
</script>


    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>