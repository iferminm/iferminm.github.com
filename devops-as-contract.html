<!DOCTYPE html>
<html lang="en">
<head>
        <title>DevOps as Contract</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>
<body>

    <div class="navigation pure-menu pure-menu-horizontal">
        <a href="/" class="pure-menu-heading  pure-menu-link">/dev/isra/blog/*</a>
        <ul class="pure-menu-list">
            <li class="pure-menu-item"></li>

            <li class="pure-menu-item"><a href="/pages/about-me.html" class="pure-menu-link">About me...</a></li>
            <li class="pure-menu-item"><a href="/pages/consulting.html" class="pure-menu-link">Consulting</a></li>
            <li class="pure-menu-item"><a href="/pages/now.html" class="pure-menu-link">Now</a></li>
            <li class="pure-menu-item"><a href="/pages/talks.html" class="pure-menu-link">Talks</a></li>
            <li class="pure-menu-item pure-menu-selected"><a href="/category/blog.html" class="pure-menu-link">Blog</a></li>
            <li class="pure-menu-item"><a href="/category/espanol.html" class="pure-menu-link">Español</a></li>
        </ul>
    </div>


<div class="page-container">
    <div class="entry-content">
        <div class="post-meta pure-g">
<div class="pure-u-3-4 meta-data">
    <a href="/category/blog.html" class="category">Blog</a><br />

    <a class="author" href="/author/israel-fermin-montilla.html">Israel Fermín Montilla</a>
    &mdash; <abbr title="2020-08-10T00:00:00+04:00">Mon 10 August 2020</abbr>
</div>        </div>
    </div>

    <div class="article-header-container">
        <div class="background-image-container">

            <div class="background-image" style="background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url(https://dl.dropboxusercontent.com/s/y7hf2p40crdu19y/careem.jpeg);">
                <img src="https://dl.dropboxusercontent.com/s/y7hf2p40crdu19y/careem.jpeg" alt="DevOps as Contract">
                <div class="title">
                <h1>
                    DevOps as Contract
                </h1>
                </div>
            </div>
        </div>
    </div>

    <div class="entry-content">
        <p>DevOps seems to be a trending topic in the software world for quite a while
now, organzations are adopting DevOps practices progressively and it's been
seen as a valuable skill to have within an Engineer's toolbelt.</p>
<p>There are many definitions of what DevOps means, everyone has their own
definition, I have mine, of course, and that's the one I'll share here.</p>
<h1>What does DevOps mean to me?</h1>
<p>DevOps is a term that mixes Development and Operations, so, it involves
all the Operations aspects of Software Engineering, things like automation,
infrastructure provisioning, deployment, monitoring and so on.</p>
<p>To me, DevOps is not about having a different team managing everyone's operations
component, it's about enabling everyone to take care of their own teams
operations, this means, administrating and managing all the platforms needed
for the software operations: version control systems, CI/CD, monitoring, etc.
This means, DevOps is about culture and ownership, every team should own
not only the software they write an maintain, but also the processes around
thart software, in the end, no one is better suited to manage it than the
team mainaining it, they have all the context, they know how to deploy it,
which metrics are important for it so that they can trigger alerts to let them
know of anything goes wrong in a timely manner, they know how to run it and
debug it so, it makes sense they own it from the ground up.</p>
<p>Now, if we see the landscape of all the DevOps-related tools it would be
something like the following image:</p>
<p><img alt="DevOps tools landscape by James Bowman" src=""></p>
<p>The image looks overwhelming, does owning all my processes means that I have
to learn one tool per domain? if so, what if the company chooses one and then
decides to migrate?, then I'll have to learn a new one from scratch!. I don't
know, that looks painful, right? too much work and I also have a Product
Manager breathing on my neck reminding me we need to release few features
yesterday. </p>
<p>Well, not really, you don't have to learn all that unless you want to, but
at least you don't need to.</p>
<h1>Then... how?</h1>
<p>Software Engineering is a lot about abstractions, we build abstractions
for everything, we don't let others access our resources directly, here are
some examples:</p>
<ul>
<li>
<p>We don't let our client applications call our databases directly and throw
queries at them, we build a backend which abstracts all the business logic
and the underlying resources and expose all of that through an API.</p>
</li>
<li>
<p>We don't give access to our services directly, we encapsulate them in a private
network and expose them via an API Gateway.</p>
</li>
<li>
<p>We don't like duplication, so instead of writing the same over and over again,
we encapsulate relevant code in classes, functions or modules and expose the
functionality as functions or methods.</p>
</li>
</ul>
<p>We do this not only to protect our resources but also to make our clients lives
easier and simpler. If we don't allow direct access to our infrastructure instead
we expose different forms of API so that others (both people and systems) use
them and it works fine, why don't we do the same with our DevOps insfrastructure?</p>
<h1>Contracts</h1>
<p>Strictly speaking, a contract is "a written or spoken agreement between two
or more entities", but the concept of "contracts" is not foreign to Computer
Science, we use contracts for almost everything:</p>
<ul>
<li>
<p>REST APIs are contracts, the users need to follow certain rules in order
for the requests to be accepted and processed successfully and the service
also follows some rules so that the client knows what to expect and what to do
in case of errors.</p>
</li>
<li>
<p>Third party libraries also expose some soft of contracts, one needs to use
the functions they expose in order to access the functionalty</p>
</li>
<li>
<p>The code we write is full of contracts: classes, functions, internal modules
expose functionalty and that's also a contract in some way</p>
</li>
<li>
<p>Even the programming languages we use are contracts, we need to follow certain
written syntactical rules and use a set of keywords so that the programs
are compiles/interpreted without errors.</p>
</li>
</ul>
<h1>A DevOps Contract</h1>
<p>What this means is encapsulating all your DevOps infrastructure behind a contract
which everyone needs to follow in order to get whatever the component does,
whether it is CI/CD, Infrastructure Provisioning or Monitoring, all engineers
shouldn't be forced to learn Jenkins, Cloudformation or Prometheus in order to do
all the setup for the services they build/maintain. What if some day we decide
not to use Cloudformation anymore and migrate to Terraform?, then all engineers
will need to spend a significant amount of time learning a new technology.</p>
<p>This isn't new either, Gitlab offers CICD as a contract. To use Gitlab's
CICD the only things that needs to be done is writing a YAML file, following
certain conventions and that's it.</p>
<h2>CICD as Contract</h2>
<p>This is a short story of how we implemented this at Careem about two years ago,
this was my first big project in the organization, again, this is not a new
concept, but it's often overlooked.</p>
<h3>The Scenario</h3>
<p>More or less 100 services, not all of them with automated deployments, 1 or 2 
deployments to production a month, almost no automated testing. A lot of moving
parts and unknowns since we were migrating (or not) away from Phabricator as
code hosting service.</p>
<p>We did have a DevOps team which maintained a very robust Jenkins cluster with
on-demand agents, but not used by all the teams because "no one had time to
learn groovy or write Jenkinsfiles", so, DevOps team was turned into the
Jenkinsfile team, they effectively wrote and maintain everyones pipelines,
it was a small team so they spent most of their time writing and updating
Jenkinsfiles as per other teams requests, this got them very frustrated because
there are more interesting things to do in DevOps and in Tech in general than
writing Jenkinsfiles.</p>
<h3>The Vision</h3>
<p>We did have a DevOps team as well as a robust Jenkins installation, we only
needed to get them to focus on doing DevOps stuff, but they were stuck with
the Jenkinsfile thing, most of the teams were relying on them.</p>
<p>The overall vision was to have the DevOps team maintaining the CICD platform,
our Jenkins cluster, and worrying about things like provisioning infrastucture
in an efficient way, cost management, compliance, etc. In summary, DevOps
would be the enabler team so that everyone could maintain and own their code
and the processes around that code.</p>
<p>The DevOps team maintains the platform and the contract to use that platform
and the service teams (the ones using the CICD platform) would only consume
the contract and follow the rules defined by the DevOps team and everyone will
be happy.</p>
<h3>The execution</h3>
<h4>Gathering information</h4>
    </div>

    <footer>
        <div class="tags">
            <a href="/tag/devops.html">devops</a>
            <a href="/tag/projects.html">projects</a>
        </div>
        <div class="pure-g post-footer">
            <div class="pure-u-1 pure-u-md-1-2">
                <div class="pure-g poster-info">
                    <div class="pure-u">
                        <a href="/author/israel-fermin-montilla.html"><img src="https://dl.dropboxusercontent.com/s/1bvnowsfke4rs2k/isra.jpg" alt=""></a>
                    </div>
                    <div class="pure-u-3-4">
                        <h3 class="author-name"><a href="/author/israel-fermin-montilla.html">Israel Fermín Montilla</a></h3>
                        <p class="author-description">
                          {' Full time husband and dad who loves technology and programming. Software Engineer @ Careem / Online Mentor @ codeinstitute.net'}
                        </p>
                    </div>
                    <style>.bmc-button img{height: 34px !important;width: 35px !important;margin-bottom: 1px !important;box-shadow: none !important;border: none !important;vertical-align: middle !important;}.bmc-button{padding: 7px 10px 7px 10px !important;line-height: 35px !important;height:51px !important;min-width:217px !important;text-decoration: none !important;display:inline-flex !important;color:#FFFFFF !important;background-color:#FF813F !important;border-radius: 5px !important;border: 1px solid transparent !important;padding: 7px 10px 7px 10px !important;font-size: 28px !important;letter-spacing:0.6px !important;box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;margin: 0 auto !important;font-family:'Cookie', cursive !important;-webkit-box-sizing: border-box !important;box-sizing: border-box !important;-o-transition: 0.3s all linear !important;-webkit-transition: 0.3s all linear !important;-moz-transition: 0.3s all linear !important;-ms-transition: 0.3s all linear !important;transition: 0.3s all linear !important;}.bmc-button:hover, .bmc-button:active, .bmc-button:focus {-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;text-decoration: none !important;box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;opacity: 0.85 !important;color:#FFFFFF !important;}</style><link href="https://fonts.googleapis.com/css?family=Cookie" rel="stylesheet"><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/iferminm"><img src="https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg" alt="Buy me a coffee"><span style="margin-left:15px;font-size:28px !important;">Buy me a coffee</span></a>
                </div>
            </div>



        </div>


        <!-- Begin MailChimp Signup Form -->
        <link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
        <style type="text/css">
            #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
            /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
            We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
        </style>
        <div id="mc_embed_signup">
            <form action="//iffm.us15.list-manage.com/subscribe/post?u=f9aa59a7fe24a1d24a95b2e41&amp;id=28de70c22b" method="post"
                id="mc-embedded-subscribe-form"
                name="mc-embedded-subscribe-form"
                class="validate" target="_blank"
                novalidate>
                <div id="mc_embed_signup_scroll">
                    <h2>Get notified</h2>
                    <p class="author-description">
                        Get an email whenever I post something or release something cool, I'm always working on something, don't miss it out!
                    </p>
                    <div class="indicates-required"><span class="asterisk">*</span> indicates required</div>
                    <div class="mc-field-group">
                        <label for="mce-EMAIL">Email Address  <span class="asterisk">*</span>
                        </label>
                        <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
                    </div>
                    <div class="mc-field-group">
                        <label for="mce-FNAME">First Name </label>
                        <input type="text" value="" name="FNAME" class="" id="mce-FNAME">
                    </div>
                    <div class="mc-field-group">
                        <label for="mce-LNAME">Last Name </label>
                        <input type="text" value="" name="LNAME" class="" id="mce-LNAME">
                    </div>
                    <div id="mce-responses" class="clear">
                        <div class="response" id="mce-error-response" style="display:none"></div>
                        <div class="response" id="mce-success-response" style="display:none"></div>
                    </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk
                    form bot signups-->
                    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text"
                    name="b_f9aa59a7fe24a1d24a95b2e41_28de70c22b"
                    tabindex="-1"
                    value=""></div>
                    <div class="clear"><input type="submit" value="Subscribe" name="subscribe"
                    id="mc-embedded-subscribe"
                    class="button"></div>
                </div>
            </form>
        </div>
        <script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($)
        {window.fnames = new Array(); window.ftypes = new
        Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj =
        jQuery.noConflict(true);</script>
        <!--End mc_embed_signup-->






    </footer>


</div>



    <footer class="index-footer">

        <a href="/" title="/dev/isra/blog/*">/dev/isra/blog/*</a>
        <a href="/category/blog.html">Blog</a>
        <a href="/category/espanol.html">Español</a>
        <a href="http://getpelican.com/">Pelican</a>
        <a href="http://python.org/">Python.org</a>
        <a href="http://jinja.pocoo.org/">Jinja2</a>

    </footer>

</body>
</html>